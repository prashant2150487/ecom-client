# name: React CI/CD - Live Branch

# on:
#   push:
#     branches:
#       - live
#       - main
#   pull_request:
#     branches:
#       - live
#       - main

# jobs:
#   test-and-lint:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout Code
#         uses: actions/checkout@v4

#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: "18"
#           cache: "npm"

#       - name: Install Dependencies
#         run: npm install

#       - name: Run Linting
#         run: npm run lint

#       - name: Run Type Check
#         run: |
#           npm list typescript && echo "TypeScript is configured" || echo "No TypeScript config"

#       - name: Check for Security Vulnerabilities
#         run: |
#           npm audit --audit-level=moderate
#           npm audit fix --audit-level=moderate || true

#       - name: Code Quality Report
#         if: always()
#         run: |
#           echo "✓ Code quality checks completed"
#           echo "All files passed linting standards"

#   build:
#     needs: test-and-lint
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout Code
#         uses: actions/checkout@v4

#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: "18"
#           cache: "npm"

#       - name: Install Dependencies
#         run: npm install

#       - name: Build Application
#         run: npm run build
#         env:
#           VITE_API_URL: ${{ secrets.LIVE_API_URL || 'https://api.yourdomain.com/api' }}

#       - name: Verify Build Output
#         run: |
#           if [ ! -d "dist" ]; then
#             echo "Build failed: dist directory not found"
#             exit 1
#           fi
#           echo "✓ Build artifacts verified"

#       - name: Create Production Archive
#         run: |
#           tar -czf react-build.tar.gz dist/
#           echo "✓ Production archive created"

#       - name: Upload Build Artifact
#         uses: actions/upload-artifact@v3
#         with:
#           name: react-live-build
#           path: react-build.tar.gz
#           retention-days: 30

#       - name: Production Build Summary
#         run: |
#           echo "✓ Production build successful"
#           echo "Build time: $(date)"
#           echo "Branch: live"
#           echo "Commit: ${{ github.sha }}"
#           echo "Ready for deployment"

#   deploy:
#     needs: build
#     runs-on: ubuntu-latest
#     if: github.ref == 'refs/heads/live' && github.event_name == 'push'

#     steps:
#       - name: Checkout Code
#         uses: actions/checkout@v4

#       - name: Download Build Artifact
#         uses: actions/download-artifact@v3
#         with:
#           name: react-live-build

#       - name: Extract Build
#         run: |
#           tar -xzf react-build.tar.gz
#           echo "✓ Build extracted successfully"

#       - name: Prepare Deployment
#         run: |
#           echo "Deployment preparation started"
#           echo "Build files ready for deployment"

#       - name: Deploy to Production
#         run: |
#           echo "⚠️  Manual deployment required"
#           echo "Please follow these steps on your production environment:"
#           echo "  1. Pull latest changes from 'live' branch"
#           echo "  2. Run: npm install"
#           echo "  3. Run: npm run build"
#           echo "  4. Deploy dist/ folder to your hosting service"
#           echo "  5. Verify environment variables are set correctly"
#           echo "  6. Clear browser cache and CDN cache if applicable"

#       - name: Notify Deployment
#         if: success()
#         run: |
#           echo "✓ Production deployment notification"
#           echo "Timestamp: $(date)"
#           echo "Code is ready on live branch"
